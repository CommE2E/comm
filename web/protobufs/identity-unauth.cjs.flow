// @flow

import * as grpcWeb from 'grpc-web';

import * as identityStructs from './identity-unauth-structs.cjs';

declare export class IdentityClientServiceClient {
  constructor (hostname: string,
               credentials?: null | { +[index: string]: string },
               options?: null | { +[index: string]: any }): void;

  registerPasswordUserStart(
    request: identityStructs.RegistrationStartRequest,
    metadata: grpcWeb.Metadata | void,
    callback: (err: grpcWeb.RpcError,
               response: identityStructs.RegistrationStartResponse) => void
  ): grpcWeb.ClientReadableStream<identityStructs.RegistrationStartResponse>;

  registerReservedPasswordUserStart(
    request: identityStructs.ReservedRegistrationStartRequest,
    metadata: grpcWeb.Metadata | void,
    callback: (err: grpcWeb.RpcError,
               response: identityStructs.RegistrationStartResponse) => void
  ): grpcWeb.ClientReadableStream<identityStructs.RegistrationStartResponse>;

  registerPasswordUserFinish(
    request: identityStructs.RegistrationFinishRequest,
    metadata: grpcWeb.Metadata | void,
    callback: (err: grpcWeb.RpcError,
               response: identityStructs.RegistrationFinishResponse) => void
  ): grpcWeb.ClientReadableStream<identityStructs.RegistrationFinishResponse>;

  logInPasswordUserStart(
    request: identityStructs.OpaqueLoginStartRequest,
    metadata: grpcWeb.Metadata | void,
    callback: (err: grpcWeb.RpcError,
               response: identityStructs.OpaqueLoginStartResponse) => void
  ): grpcWeb.ClientReadableStream<identityStructs.OpaqueLoginStartResponse>;

  logInPasswordUserFinish(
    request: identityStructs.OpaqueLoginFinishRequest,
    metadata: grpcWeb.Metadata | void,
    callback: (err: grpcWeb.RpcError,
               response: identityStructs.OpaqueLoginFinishResponse) => void
  ): grpcWeb.ClientReadableStream<identityStructs.OpaqueLoginFinishResponse>;

  logInWalletUser(
    request: identityStructs.WalletLoginRequest,
    metadata: grpcWeb.Metadata | void,
    callback: (err: grpcWeb.RpcError,
               response: identityStructs.WalletLoginResponse) => void
  ): grpcWeb.ClientReadableStream<identityStructs.WalletLoginResponse>;

  logInReservedWalletUser(
    request: identityStructs.ReservedWalletLoginRequest,
    metadata: grpcWeb.Metadata | void,
    callback: (err: grpcWeb.RpcError,
               response: identityStructs.WalletLoginResponse) => void
  ): grpcWeb.ClientReadableStream<identityStructs.WalletLoginResponse>;

  uploadKeysForRegisteredDeviceAndLogIn(
    request: identityStructs.SecondaryDeviceKeysUploadRequest,
    metadata: grpcWeb.Metadata | void,
    callback: (err: grpcWeb.RpcError,
               response: identityStructs.SecondaryDeviceLoginResponse) => void
  ): grpcWeb.ClientReadableStream<identityStructs.SecondaryDeviceLoginResponse>;

  generateNonce(
    request: identityStructs.Empty,
    metadata: grpcWeb.Metadata | void,
    callback: (err: grpcWeb.RpcError,
               response: identityStructs.GenerateNonceResponse) => void
  ): grpcWeb.ClientReadableStream<identityStructs.GenerateNonceResponse>;

  verifyUserAccessToken(
    request: identityStructs.VerifyUserAccessTokenRequest,
    metadata: grpcWeb.Metadata | void,
    callback: (err: grpcWeb.RpcError,
               response: identityStructs.VerifyUserAccessTokenResponse) => void
  ): grpcWeb.ClientReadableStream<identityStructs.VerifyUserAccessTokenResponse>;

  addReservedUsernames(
    request: identityStructs.AddReservedUsernamesRequest,
    metadata: grpcWeb.Metadata | void,
    callback: (err: grpcWeb.RpcError,
               response: identityStructs.Empty) => void
  ): grpcWeb.ClientReadableStream<identityStructs.Empty>;

  removeReservedUsername(
    request: identityStructs.RemoveReservedUsernameRequest,
    metadata: grpcWeb.Metadata | void,
    callback: (err: grpcWeb.RpcError,
               response: identityStructs.Empty) => void
  ): grpcWeb.ClientReadableStream<identityStructs.Empty>;

  ping(
    request: identityStructs.Empty,
    metadata: grpcWeb.Metadata | void,
    callback: (err: grpcWeb.RpcError,
               response: identityStructs.Empty) => void
  ): grpcWeb.ClientReadableStream<identityStructs.Empty>;

}

declare export class IdentityClientServicePromiseClient {
  constructor (hostname: string,
               credentials?: null | { +[index: string]: string },
               options?: null | { +[index: string]: any }): void;

  registerPasswordUserStart(
    request: identityStructs.RegistrationStartRequest,
    metadata?: grpcWeb.Metadata
  ): Promise<identityStructs.RegistrationStartResponse>;

  registerReservedPasswordUserStart(
    request: identityStructs.ReservedRegistrationStartRequest,
    metadata?: grpcWeb.Metadata
  ): Promise<identityStructs.RegistrationStartResponse>;

  registerPasswordUserFinish(
    request: identityStructs.RegistrationFinishRequest,
    metadata?: grpcWeb.Metadata
  ): Promise<identityStructs.RegistrationFinishResponse>;

  logInPasswordUserStart(
    request: identityStructs.OpaqueLoginStartRequest,
    metadata?: grpcWeb.Metadata
  ): Promise<identityStructs.OpaqueLoginStartResponse>;

  logInPasswordUserFinish(
    request: identityStructs.OpaqueLoginFinishRequest,
    metadata?: grpcWeb.Metadata
  ): Promise<identityStructs.OpaqueLoginFinishResponse>;

  logInWalletUser(
    request: identityStructs.WalletLoginRequest,
    metadata?: grpcWeb.Metadata
  ): Promise<identityStructs.WalletLoginResponse>;

  logInReservedWalletUser(
    request: identityStructs.ReservedWalletLoginRequest,
    metadata?: grpcWeb.Metadata
  ): Promise<identityStructs.WalletLoginResponse>;

  uploadKeysForRegisteredDeviceAndLogIn(
    request: identityStructs.SecondaryDeviceKeysUploadRequest,
    metadata?: grpcWeb.Metadata
  ): Promise<identityStructs.SecondaryDeviceLoginResponse>;

  generateNonce(
    request: identityStructs.Empty,
    metadata?: grpcWeb.Metadata
  ): Promise<identityStructs.GenerateNonceResponse>;

  verifyUserAccessToken(
    request: identityStructs.VerifyUserAccessTokenRequest,
    metadata?: grpcWeb.Metadata
  ): Promise<identityStructs.VerifyUserAccessTokenResponse>;

  addReservedUsernames(
    request: identityStructs.AddReservedUsernamesRequest,
    metadata?: grpcWeb.Metadata
  ): Promise<identityStructs.Empty>;

  removeReservedUsername(
    request: identityStructs.RemoveReservedUsernameRequest,
    metadata?: grpcWeb.Metadata
  ): Promise<identityStructs.Empty>;

  ping(
    request: identityStructs.Empty,
    metadata?: grpcWeb.Metadata
  ): Promise<identityStructs.Empty>;

}
